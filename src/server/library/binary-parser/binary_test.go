package binary

import (
	"testing"
)

type Test struct {
	Lenght uint16 `binary:"big"`
	User   string `binary:"little null-off"`
	Theme  string
	Body   string
	Level  int
}

func BenchmarkBinaryMarshal(b *testing.B) {
	b.StartTimer()

	test := new(Test)
	test.Lenght = 100
	test.User = "System Mail"
	test.Theme = "System Mail"
	test.Body = `For your achievement, you'll get one Charm Token.\nFrom Dwarven Brotherhood`
	test.Level = 1322133

	for i := 0; i < b.N; i++ {
		bin := new(Zoom)
		bin.Struct = test
		bin.Marshal()
	}
}

func BenchmarkBinaryUnmarshal(b *testing.B) {
	b.StartTimer()

	test := new(Test)
	bt := []byte{0x64, 0x00, 0x0c, 0x00, 0x53, 0x79, 0x73, 0x74, 0x65, 0x6d, 0x20, 0x4d, 0x61, 0x69, 0x6c, 0x00, 0x0c, 0x00, 0x53, 0x79, 0x73, 0x74, 0x65, 0x6d, 0x20, 0x4d, 0x61, 0x69, 0x6c, 0x00, +0x4c, 0x00, 0x46, 0x6f, 0x72, 0x20, 0x79, 0x6f, 0x75, 0x72, 0x20, 0x61, 0x63, 0x68, 0x69, 0x65, 0x76, 0x65, 0x6d, 0x65, 0x6e, 0x74, 0x2c, 0x20, 0x79, 0x6f, 0x75, 0x27, 0x6c, 0x6c, 0x20, 0x67, +0x65, 0x74, 0x20, 0x6f, 0x6e, 0x65, 0x20, 0x43, 0x68, 0x61, 0x72, 0x6d, 0x20, 0x54, 0x6f, 0x6b, 0x65, 0x6e, 0x2e, 0x5c, 0x6e, 0x46, 0x72, 0x6f, 0x6d, 0x20, 0x44, 0x77, 0x61, 0x72, 0x76, 0x65, +0x6e, 0x20, 0x42, 0x72, 0x6f, 0x74, 0x68, 0x65, 0x72, 0x68, 0x6f, 0x6f, 0x64, 0x00, 0x95, 0x2c, 0x14, 0x00, 0x00, 0x00, 0x00, 0x00}

	for i := 0; i < b.N; i++ {
		bin := new(Zoom)
		bin.Struct = test
		bin.Unmarshal(bt)
	}
}
